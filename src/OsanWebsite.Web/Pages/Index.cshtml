@page "{feed?}"
@model IndexModel
@{
    ViewData["Title"] = "";
}

<div class="slide-show">
    @foreach (var slide in Model.SlideShow.Pictures)
    {
        <partial name="_SlideItem" model=@slide />
    }
</div>

<div style="font-size: 9pt;">
    <div style="text-align:center;display:flex;align-items:center;justify-content:center;">
        <img src="/images/logo-o.png" style="height: 16px;display:inline;" /> <span style="font-size:9pt;color: #db0842; margin-left: 10px;">CAVE À VIN . RESTAURANT . PIANO BAR</span>
    </div>

    <div style="text-align:center;">
        Vous pouvez <a href="/reservation" class="osan-link" style="display:inline">réserver une table</a> ou vous faire livrer à domicile.
    </div>

    <br />

    <p>
        Ne manquez pas nos soirées piano bar, il y en a déjà eu pas mal (<a href="/?feed=archived" class="osan-link" style="display:inline">archives</a>). Abonnez-vous sur nos pages <strong>Facebook/Insta/Twitter</strong> et restez connectés à notre <strong>Calendrier</strong>.
        N'hésitez pas à nous contacter pour vos évènements privés.
    </p>

    <p>
        Dans notre rubrique <strong>Spotlights</strong> vous trouverez des contenus spéciaux, conçus pour partager avez vous notre culture, nos produits, et notre savoir faire.
    </p>
</div>

<br />

<div id="feed-header" class="feed-header">
    @if (@Model.Feed == "calendar")
    {
        <span class="feed-menu">CALENDRIER</span>
    }
    else
    {
        <a href="/?feed=calendar" class="feed-menu">CALENDRIER</a>
    }

    @if (@Model.Feed == "archived")
    {
        <span class="feed-menu">ARCHIVES</span>
    }
    else
    {
        <a href="/?feed=archived" class="feed-menu">ARCHIVES</a>
    }

    @if (@Model.Feed == "spotlights")
    {
        <span class="feed-menu">SPOTLIGHTS</span>
    }
    else
    {
        <a href="/?feed=spotlights" class="feed-menu">SPOTLIGHTS</a>
    }
</div>

<br />

<component type="typeof(OsanWebsite.Web.Components.NewsFeed)" param-Feed="@Model.Feed" render-mode="Server" />

@section Scripts {
    <script>
        $(document).ready(function () {
            $('.slide-show').slick({
                dots: true,
                arrows: false,
                autoplay: true,
                autoplaySpeed: 5000,
            });

            var feedHeader = document.getElementById("feed-header");
            var sticky = feedHeader.offsetTop;

            function shouldStickFeedHeader() {
                if (window.pageYOffset > sticky) {
                    feedHeader.classList.add("sticky");
                    document.body.classList.add("sticky-body");
                } else {
                    feedHeader.classList.remove("sticky");
                    document.body.classList.remove("sticky-body");
                }
            }

            window.onscroll = function () { shouldStickFeedHeader() };
        });
    </script>

    <script src="_framework/blazor.server.js"></script>
}
